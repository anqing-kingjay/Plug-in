<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>根据百度地图api获取areaCode</title>
</head>
<body>
    
</body>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script>
    $.ajax({
      url:"https://api.map.baidu.com/location/ip?ak=2tYgLliVOegREgQzP8B0OTkpXRPPT5je&coor=bd09ll",
      dataType:'jsonp',
      async:false,
      success:function(data){
        var lng = data.content.point.y,
            lat = data.content.point.x;

        $.ajax({
            url:"http://api.map.baidu.com/geocoder/v2/?ak=2tYgLliVOegREgQzP8B0OTkpXRPPT5je&callback=renderReverse&location="+lng+","+lat+"&output=json",
            dataType:'jsonp',
            async:false,
            success:function(data){
                console.log(data)
            }
        })
      }
    })

    // https://github.com/webmodules/jsonp
    // npm i jsonp
    // jsonp(
    //   "https://api.map.baidu.com/location/ip?ak=2tYgLliVOegREgQzP8B0OTkpXRPPT5je&coor=bd09ll",
    //   function(err, data){
    //     console.log(err, data)
    //     if (err) {
    //       console.log(err)
    //     }else{
    //       var lng = data.content.point.y,
    //           lat = data.content.point.x;
    //           jsonp(
    //             "http://api.map.baidu.com/geocoder/v2/?ak=2tYgLliVOegREgQzP8B0OTkpXRPPT5je&callback=renderReverse&location="+lng+","+lat+"&output=json",
    //             function(err, data){
    //               if (err) {
    //                 console.log(err)
    //               }else{
    //                 proCode = ((data.result.addressComponent.adcode).substring(0,2))+'0000'
    //               }
    //             }
    //           )
    //     }
    //   }
    // )
</script>
</html>